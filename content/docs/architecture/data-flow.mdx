---
title: Data Flow
description: How data moves through pages, APIs, and database writes.
---

## Read path (showing data)

1. A page loads.
2. Server-side code runs a Drizzle query.
3. Data is transformed into UI-friendly shape.
4. HTML is rendered and sent to browser.
5. Client components hydrate only where interactivity is needed.

Example pages:

- `src/app/course-rating/page.tsx`
- `src/app/course-rating/search/page.tsx`
- `src/app/courses/[courseCode]/page.tsx`

## Write path (submitting comments)

1. User fills `/submit-comment` form.
2. Frontend sends `POST /api/comments`.
3. API validates auth and input.
4. API inserts comment and updates aggregate values in `CourseRating`.
5. API returns JSON (including new comment id).

## Performance patterns in current code

- `Promise.all` for parallel fetches in submit form
- `useMemo` for expensive list filtering
- Search dropdown result limiting to avoid large renders

If you are new: these patterns reduce waiting time and browser work when lists are large.
